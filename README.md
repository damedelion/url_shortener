# url_shortener

Приложение, которое предоставляет API для создания сокращённых ссылок.
- ссылка является уникальной
- на один оригинальный URL ссылает только одна сокращенная ссылка
- ссылка длиной 10 символов
- ссылка состоит из символов латинского алфавита в нижнем и верхнем регистре, цифр и символа _ (подчеркивание)

Сервис распространяется в виде [Docker-образа](https://hub.docker.com/r/damedelion/url_shortener_app)


## API

- Создание сокращённой ссылки:
```
POST /
{
    "long_url": "https://example.com"
}
```
Сохраняет оригинальный URL в базе и возвращает сокращённый

- Получение оригинального URL:
```
GET /{short_url}
```
Принимает сокращённый URL и возвращает оригинальный URL

## Запуск
```
make docker-build
make docker-up
make docker-start
make goose-up
```

## Хранение данных
Сервис поддерживает два варианта хранилища:
- PostgreSQL
- Встроенное хранение в памяти

По умолчанию используется PostrgreSQL, для переключения на встроенное хранилище необходимо изменить раздел `db` в файле `config/config.yaml` следующим образом:

```
db:
    type: inmemory
```

При использовании встроенного хранилища сервис запускается так:

```
make docker-inmemory-build
make docker-inmemory-start
```
